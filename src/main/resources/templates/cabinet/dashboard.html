<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">

<head>
  <title th:text="#{cabinet.dashboard.title}">–ú—ñ–π –∫–∞–±—ñ–Ω–µ—Ç</title>
</head>

<body>
<div layout:fragment="content" class="max-w-7xl mx-auto px-4 py-8">

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold" th:text="#{cabinet.dashboard.welcome} + ' ' + ${user.name}">
      –í—ñ—Ç–∞—î–º–æ, –Ü–º'—è!
    </h1>
    <p class="text-gray-600 mt-2" th:text="#{cabinet.dashboard.subtitle}">
      –ö–µ—Ä—É–π—Ç–µ —Å–≤–æ—ó–º –∞–∫–∞—É–Ω—Ç–æ–º —Ç–∞ –ø—ñ–¥–ø–∏—Å–∫–æ—é
    </p>
  </div>

  <!-- –°—Ç–∞—Ç—É—Å –ø—ñ–¥–ø–∏—Å–∫–∏ -->
  <div class="bg-white rounded-lg shadow-md p-6 mb-6">
    <h2 class="text-xl font-semibold mb-4" th:text="#{cabinet.subscription.status}">
      –°—Ç–∞—Ç—É—Å –ø—ñ–¥–ø–∏—Å–∫–∏
    </h2>

    <div th:if="${hasActiveSubscription}" class="flex items-center justify-between">
      <div>
        <p class="text-lg font-medium text-green-600" th:text="#{cabinet.subscription.active}">
          ‚úì –ê–∫—Ç–∏–≤–Ω–∞ –ø—ñ–¥–ø–∏—Å–∫–∞
        </p>
        <p class="text-gray-600 mt-1">
          <span th:text="#{cabinet.subscription.valid_until}">–î—ñ—î –¥–æ:</span>
          <span th:text="${#temporals.format(activeSubscription.endDate, 'dd.MM.yyyy HH:mm')}">
                        31.12.2025 23:59
                    </span>
        </p>
        <p class="text-gray-600 text-sm mt-1">
          <span th:text="#{cabinet.subscription.plan}">–ü–ª–∞–Ω:</span>
          <span th:text="${activeSubscription.subscriptionPlan.translations[0].name}">
                        –ú—ñ—Å—è—á–Ω–∞ –ø—ñ–¥–ø–∏—Å–∫–∞
                    </span>
        </p>
      </div>
      <a th:href="@{/{lang}/cabinet/subscription(lang=${#locale.language})}"
         class="bg-yellow-400 hover:bg-yellow-500 text-black px-6 py-2 rounded-lg font-medium transition">
        <span th:text="#{cabinet.subscription.manage}">–ö–µ—Ä—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–æ—é</span>
      </a>
    </div>

    <div th:unless="${hasActiveSubscription}" class="text-center py-8">
      <p class="text-lg text-gray-600 mb-4" th:text="#{cabinet.subscription.no_active}">
        –£ –≤–∞—Å –Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–æ—ó –ø—ñ–¥–ø–∏—Å–∫–∏
      </p>
      <a th:href="@{/{lang}/subscription(lang=${#locale.language})}"
         class="bg-yellow-400 hover:bg-yellow-500 text-black px-8 py-3 rounded-lg font-medium inline-block transition">
        <span th:text="#{cabinet.subscription.choose_plan}">–û–±—Ä–∞—Ç–∏ —Ç–∞—Ä–∏—Ñ–Ω–∏–π –ø–ª–∞–Ω</span>
      </a>
    </div>
  </div>

  <!-- –®–≤–∏–¥–∫—ñ –¥—ñ—ó -->
  <div class="grid md:grid-cols-3 gap-6 mb-8">
    <!-- –ú–æ—ó —É—Ä–æ–∫–∏ -->
    <a th:href="@{/{lang}/lessons(lang=${#locale.language})}"
       class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition">
      <div class="text-4xl mb-3">üìö</div>
      <h3 class="text-lg font-semibold mb-2" th:text="#{cabinet.quick_actions.my_lessons}">
        –ú–æ—ó —É—Ä–æ–∫–∏
      </h3>
      <p class="text-gray-600 text-sm" th:text="#{cabinet.quick_actions.my_lessons_desc}">
        –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ –Ω–∞–≤—á–∞–ª—å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏
      </p>
    </a>

    <!-- –Ü—Å—Ç–æ—Ä—ñ—è –∑–∞–º–æ–≤–ª–µ–Ω—å -->
    <a th:href="@{/{lang}/cabinet/orders(lang=${#locale.language})}"
       class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition">
      <div class="text-4xl mb-3">üßæ</div>
      <h3 class="text-lg font-semibold mb-2" th:text="#{cabinet.quick_actions.orders}">
        –ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
      </h3>
      <p class="text-gray-600 text-sm" th:text="#{cabinet.quick_actions.orders_desc}">
        –Ü—Å—Ç–æ—Ä—ñ—è –ø–æ–∫—É–ø–æ–∫ —Ç–∞ –ø–ª–∞—Ç–µ–∂—ñ–≤
      </p>
    </a>

    <!-- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è -->
    <a th:href="@{/{lang}/cabinet/settings(lang=${#locale.language})}"
       class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition">
      <div class="text-4xl mb-3">‚öôÔ∏è</div>
      <h3 class="text-lg font-semibold mb-2" th:text="#{cabinet.quick_actions.settings}">
        –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
      </h3>
      <p class="text-gray-600 text-sm" th:text="#{cabinet.quick_actions.settings_desc}">
        –ö–µ—Ä—É–π—Ç–µ —Å–≤–æ—ó–º –ø—Ä–æ—Ñ—ñ–ª–µ–º
      </p>
    </a>
  </div>

  <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) -->
  <div class="bg-white rounded-lg shadow-md p-6">
    <h2 class="text-xl font-semibold mb-4" th:text="#{cabinet.statistics.title}">
      –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    </h2>
    <div class="grid md:grid-cols-3 gap-4">
      <div class="text-center">
        <p class="text-3xl font-bold text-yellow-600">42</p>
        <p class="text-gray-600 text-sm mt-1" th:text="#{cabinet.statistics.lessons_accessed}">
          –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–æ —É—Ä–æ–∫—ñ–≤
        </p>
      </div>
      <div class="text-center">
        <p class="text-3xl font-bold text-yellow-600">120</p>
        <p class="text-gray-600 text-sm mt-1" th:text="#{cabinet.statistics.materials_downloaded}">
          –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤
        </p>
      </div>
      <div class="text-center">
        <p class="text-3xl font-bold text-yellow-600"
           th:text="${hasActiveSubscription} ? ${#temporals.format(activeSubscription.startDate, 'dd.MM.yyyy')} : '-'">
          15.11.2024
        </p>
        <p class="text-gray-600 text-sm mt-1" th:text="#{cabinet.statistics.member_since}">
          –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑
        </p>
      </div>
    </div>
  </div>

</div>
</body>
</html>